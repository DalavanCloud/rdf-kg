<html>
	<head>
		<title>Wikidata</title>
		<meta charset="UTF-8"/>
		<script src="jquery.js"></script>
		<script src="jsonld.js"></script>
		<script src="shared.js"></script>
		<style>
		td { border: 1px solid red; }
		</style>
	</head>
<body>

<h1>Wikidata to n-triples</h1>

<div>
	<div style="width:100%;height:auto;">
		<h2>JSON</h2>

<!-- JSON for data object goes below -->
			<textarea id="json" style="width:100%;background-color:#224FBC;color:#FFFF66;" rows="20">

{"entities":{"Q4332701":{"pageid":4140810,"ns":0,"title":"Q4332701","lastrevid":372422752,"modified":"2016-09-02T13:21:42Z","type":"item","id":"Q4332701","labels":{"ru":{"language":"ru","value":"\u0425\u043e\u0445\u0440\u043e\u0439\u0442\u0438\u043d\u0435\u0440, \u0411\u0435\u043d\u0435\u0434\u0438\u043a\u0442 \u041f\u044c\u0435\u0440 \u0416\u043e\u0440\u0436"},"en":{"language":"en","value":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner"},"es":{"language":"es","value":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner"},"de":{"language":"de","value":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner"},"fr":{"language":"fr","value":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner"},"nl":{"language":"nl","value":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner"},"ja":{"language":"ja","value":"\u30d9\u30cd\u30c7\u30a3\u30af\u30c8\u30fb\u30d4\u30a8\u30fc\u30eb\u30fb\u30b8\u30e7\u30eb\u30b8\u30e5\u30fb\u30db\u30fc\u30db\u30ed\u30a4\u30c6\u30a3\u30ca\u30fc"},"ca":{"language":"ca","value":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner"},"it":{"language":"it","value":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner"},"nds":{"language":"nds","value":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner"},"vmf":{"language":"vmf","value":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner"},"ar":{"language":"ar","value":"\u0628\u0646\u062f\u064a\u0643\u062a \u0628\u064a\u064a\u0631 \u062c\u0648\u0631\u062c \u0647\u0648\u0634\u0631\u0648\u062a\u064a\u0646\u064a\u0647"}},"descriptions":{"ja":{"language":"ja","value":"\u30b9\u30a4\u30b9\u306e\u690d\u7269\u5b66\u8005"},"en":{"language":"en","value":"Swiss botanist"},"de":{"language":"de","value":"Schweizer Botaniker (1873\u20131959)"},"nds":{"language":"nds","value":"Schwiezer Botaniker (1873\u20131959)"},"vmf":{"language":"vmf","value":"Schwaiz\u00e4 Bodanik\u00e4 (1873\u20131959)"},"nl":{"language":"nl","value":"botanicus uit Zwitserland (-1959)"}},"aliases":{"ru":[{"language":"ru","value":"Hochr."},{"language":"ru","value":"\u0411\u0435\u043d\u0435\u0434\u0438\u043a\u0442 \u041f\u044c\u0435\u0440 \u0416\u043e\u0440\u0436 \u0425\u043e\u0445\u0440\u043e\u0439\u0442\u0438\u043d\u0435\u0440"},{"language":"ru","value":"\u0411\u0435\u043d\u0435\u0434\u0438\u043a\u0442 \u041f\u044c\u0435\u0440 \u0416\u043e\u0440\u0436 \u0425\u043e\u0445\u0440\u0435\u0439\u0442\u0438\u043d\u0435\u0440"},{"language":"ru","value":"\u0411\u0435\u043d\u0435\u0434\u0438\u043a\u0442 \u041f\u044c\u0435\u0440 \u0416\u043e\u0440\u0436 \u0425\u043e\u0445\u0440\u0451\u0439\u0442\u0438\u043d\u0435\u0440"}],"es":[{"language":"es","value":"Hochr."},{"language":"es","value":"Benedict Pierre Georges Hochreutiner"},{"language":"es","value":"Hochr"},{"language":"es","value":"Ben\u00e9dict Pierre Georges Hochreutiner"}],"de":[{"language":"de","value":"Hochr."}],"en":[{"language":"en","value":"Hochr."}],"nds":[{"language":"nds","value":"Hochr."}],"vmf":[{"language":"vmf","value":"Hochr."}],"bg":[{"language":"bg","value":"Hochr."}],"it":[{"language":"it","value":"Hochr."}],"nl":[{"language":"nl","value":"Benedict Pierre Georges Hochreutiner"}]},"claims":{"P428":[{"mainsnak":{"snaktype":"value","property":"P428","datavalue":{"value":"Hochr.","type":"string"},"datatype":"external-id"},"type":"statement","id":"q4332701$17E2D99A-D38D-44CC-B6A8-0B98F64831FB","rank":"normal","references":[{"hash":"f9f6475df9badaf451aeec050149a9bc5c8370a5","snaks":{"P248":[{"snaktype":"value","property":"P248","datavalue":{"value":{"entity-type":"item","numeric-id":922063,"id":"Q922063"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}],"P586":[{"snaktype":"value","property":"P586","datavalue":{"value":"3982-1","type":"string"},"datatype":"external-id"}]},"snaks-order":["P248","P586"]}]}],"P214":[{"mainsnak":{"snaktype":"value","property":"P214","datavalue":{"value":"266555153","type":"string"},"datatype":"external-id"},"type":"statement","id":"q4332701$57C72087-1355-44C2-B1A5-DC35D87F96C6","rank":"normal","references":[{"hash":"7eb64cf9621d34c54fd4bd040ed4b61a88c4a1a0","snaks":{"P143":[{"snaktype":"value","property":"P143","datavalue":{"value":{"entity-type":"item","numeric-id":328,"id":"Q328"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}]},"snaks-order":["P143"]}]}],"P31":[{"mainsnak":{"snaktype":"value","property":"P31","datavalue":{"value":{"entity-type":"item","numeric-id":5,"id":"Q5"},"type":"wikibase-entityid"},"datatype":"wikibase-item"},"type":"statement","id":"Q4332701$BCD76D1E-3ED8-4C3E-ABA9-0E51B258E926","rank":"normal","references":[{"hash":"1403bc545d43491fdc87e2bd2ef07197188a94ed","snaks":{"P248":[{"snaktype":"value","property":"P248","datavalue":{"value":{"entity-type":"item","numeric-id":922063,"id":"Q922063"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}]},"snaks-order":["P248"]}]}],"P570":[{"mainsnak":{"snaktype":"value","property":"P570","datavalue":{"value":{"time":"+1959-02-05T00:00:00Z","timezone":0,"before":0,"after":0,"precision":11,"calendarmodel":"http://www.wikidata.org/entity/Q1985727"},"type":"time"},"datatype":"time"},"type":"statement","id":"Q4332701$30A0132F-652E-4590-838F-831C13425413","rank":"normal","references":[{"hash":"dbe2189e7b0d3953de6f69cc1cc88109a79605a4","snaks":{"P143":[{"snaktype":"value","property":"P143","datavalue":{"value":{"entity-type":"item","numeric-id":8449,"id":"Q8449"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}]},"snaks-order":["P143"]}]}],"P569":[{"mainsnak":{"snaktype":"value","property":"P569","datavalue":{"value":{"time":"+1873-03-03T00:00:00Z","timezone":0,"before":0,"after":0,"precision":11,"calendarmodel":"http://www.wikidata.org/entity/Q1985727"},"type":"time"},"datatype":"time"},"type":"statement","id":"Q4332701$CB941118-A7CB-4968-8738-EDEF3EFCBE8D","rank":"normal","references":[{"hash":"d6e3ab4045fb3f3feea77895bc6b27e663fc878a","snaks":{"P143":[{"snaktype":"value","property":"P143","datavalue":{"value":{"entity-type":"item","numeric-id":206855,"id":"Q206855"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}]},"snaks-order":["P143"]}]}],"P18":[{"mainsnak":{"snaktype":"value","property":"P18","datavalue":{"value":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner.jpg","type":"string"},"datatype":"commonsMedia"},"type":"statement","id":"Q4332701$79E1F591-C11A-409C-AAFB-1D9705D2FE99","rank":"normal","references":[{"hash":"d6e3ab4045fb3f3feea77895bc6b27e663fc878a","snaks":{"P143":[{"snaktype":"value","property":"P143","datavalue":{"value":{"entity-type":"item","numeric-id":206855,"id":"Q206855"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}]},"snaks-order":["P143"]}]}],"P19":[{"mainsnak":{"snaktype":"value","property":"P19","datavalue":{"value":{"entity-type":"item","numeric-id":25607,"id":"Q25607"},"type":"wikibase-entityid"},"datatype":"wikibase-item"},"type":"statement","qualifiers":{"P17":[{"snaktype":"value","property":"P17","hash":"bee41954e281d28ea08784a3e363720ab5be9562","datavalue":{"value":{"entity-type":"item","numeric-id":39,"id":"Q39"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}]},"qualifiers-order":["P17"],"id":"Q4332701$97AC9FA7-4F91-46DA-977D-BED57BBD9FDD","rank":"normal","references":[{"hash":"d6e3ab4045fb3f3feea77895bc6b27e663fc878a","snaks":{"P143":[{"snaktype":"value","property":"P143","datavalue":{"value":{"entity-type":"item","numeric-id":206855,"id":"Q206855"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}]},"snaks-order":["P143"]}]}],"P20":[{"mainsnak":{"snaktype":"value","property":"P20","datavalue":{"value":{"entity-type":"item","numeric-id":71,"id":"Q71"},"type":"wikibase-entityid"},"datatype":"wikibase-item"},"type":"statement","qualifiers":{"P17":[{"snaktype":"value","property":"P17","hash":"bee41954e281d28ea08784a3e363720ab5be9562","datavalue":{"value":{"entity-type":"item","numeric-id":39,"id":"Q39"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}]},"qualifiers-order":["P17"],"id":"Q4332701$71643EE2-FD4C-42E9-A705-DB8142A5D984","rank":"normal","references":[{"hash":"d6e3ab4045fb3f3feea77895bc6b27e663fc878a","snaks":{"P143":[{"snaktype":"value","property":"P143","datavalue":{"value":{"entity-type":"item","numeric-id":206855,"id":"Q206855"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}]},"snaks-order":["P143"]}]}],"P646":[{"mainsnak":{"snaktype":"value","property":"P646","datavalue":{"value":"/m/05q55q3","type":"string"},"datatype":"external-id"},"type":"statement","id":"Q4332701$F707CA21-C093-4CD0-BBF7-288AC950768E","rank":"normal","references":[{"hash":"af38848ab5d9d9325cffd93a5ec656cc6ca889ed","snaks":{"P248":[{"snaktype":"value","property":"P248","datavalue":{"value":{"entity-type":"item","numeric-id":15241312,"id":"Q15241312"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}],"P577":[{"snaktype":"value","property":"P577","datavalue":{"value":{"time":"+2013-10-28T00:00:00Z","timezone":0,"before":0,"after":0,"precision":11,"calendarmodel":"http://www.wikidata.org/entity/Q1985727"},"type":"time"},"datatype":"time"}]},"snaks-order":["P248","P577"]}]}],"P106":[{"mainsnak":{"snaktype":"value","property":"P106","datavalue":{"value":{"entity-type":"item","numeric-id":2374149,"id":"Q2374149"},"type":"wikibase-entityid"},"datatype":"wikibase-item"},"type":"statement","id":"Q4332701$A64F5B66-D274-47D0-BBF2-68E793D631E2","rank":"normal"}],"P269":[{"mainsnak":{"snaktype":"value","property":"P269","datavalue":{"value":"076439402","type":"string"},"datatype":"external-id"},"type":"statement","id":"Q4332701$E8465DA1-9819-413D-85BE-C7E453F3A24F","rank":"normal","references":[{"hash":"a51d6594fee36c7452eaed2db35a4833613a7078","snaks":{"P143":[{"snaktype":"value","property":"P143","datavalue":{"value":{"entity-type":"item","numeric-id":54919,"id":"Q54919"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}]},"snaks-order":["P143"]}]}],"P21":[{"mainsnak":{"snaktype":"value","property":"P21","datavalue":{"value":{"entity-type":"item","numeric-id":6581097,"id":"Q6581097"},"type":"wikibase-entityid"},"datatype":"wikibase-item"},"type":"statement","id":"Q4332701$957AFEB0-9FDB-4A31-80D6-CE5D338ADBE5","rank":"normal"}],"P27":[{"mainsnak":{"snaktype":"value","property":"P27","datavalue":{"value":{"entity-type":"item","numeric-id":39,"id":"Q39"},"type":"wikibase-entityid"},"datatype":"wikibase-item"},"type":"statement","id":"Q4332701$D2F07E6E-CB5C-430F-8243-101760586FF6","rank":"normal"}],"P735":[{"mainsnak":{"snaktype":"value","property":"P735","datavalue":{"value":{"entity-type":"item","numeric-id":19967776,"id":"Q19967776"},"type":"wikibase-entityid"},"datatype":"wikibase-item"},"type":"statement","id":"Q4332701$AEF372E8-F606-4E63-9058-530D90779917","rank":"normal"}],"P373":[{"mainsnak":{"snaktype":"value","property":"P373","datavalue":{"value":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner","type":"string"},"datatype":"string"},"type":"statement","id":"Q4332701$69AB4171-EA6C-4917-9895-BC25D0E0817A","rank":"normal"}],"P268":[{"mainsnak":{"snaktype":"value","property":"P268","datavalue":{"value":"12388656t","type":"string"},"datatype":"external-id"},"type":"statement","id":"Q4332701$A9D064AD-272D-46D1-86FC-D241AE5DD3A9","rank":"normal","references":[{"hash":"ca9e0c52719e50a884b361d1a9a31d004195d376","snaks":{"P143":[{"snaktype":"value","property":"P143","datavalue":{"value":{"entity-type":"item","numeric-id":54919,"id":"Q54919"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}],"P813":[{"snaktype":"value","property":"P813","datavalue":{"value":{"time":"+2015-10-06T00:00:00Z","timezone":0,"before":0,"after":0,"precision":11,"calendarmodel":"http://www.wikidata.org/entity/Q1985727"},"type":"time"},"datatype":"time"}]},"snaks-order":["P143","P813"]}]}],"P586":[{"mainsnak":{"snaktype":"value","property":"P586","datavalue":{"value":"3982-1","type":"string"},"datatype":"external-id"},"type":"statement","id":"Q4332701$59607540-FDF2-472D-B049-7C8EAB347D13","rank":"normal","references":[{"hash":"57b4cbc09c7a9e6e071fe32109201578f486c585","snaks":{"P248":[{"snaktype":"value","property":"P248","datavalue":{"value":{"entity-type":"item","numeric-id":922063,"id":"Q922063"},"type":"wikibase-entityid"},"datatype":"wikibase-item"}],"P813":[{"snaktype":"value","property":"P813","datavalue":{"value":{"time":"+2016-04-22T00:00:00Z","timezone":0,"before":0,"after":0,"precision":11,"calendarmodel":"http://www.wikidata.org/entity/Q1985727"},"type":"time"},"datatype":"time"}]},"snaks-order":["P248","P813"]}]}]},"sitelinks":{"arwiki":{"site":"arwiki","title":"\u0628\u0646\u062f\u064a\u0643\u062a \u0628\u064a\u064a\u0631 \u062c\u0648\u0631\u062c \u0647\u0648\u0634\u0631\u0648\u062a\u064a\u0646\u064a\u0647","badges":[],"url":"https://ar.wikipedia.org/wiki/%D8%A8%D9%86%D8%AF%D9%8A%D9%83%D8%AA_%D8%A8%D9%8A%D9%8A%D8%B1_%D8%AC%D9%88%D8%B1%D8%AC_%D9%87%D9%88%D8%B4%D8%B1%D9%88%D8%AA%D9%8A%D9%86%D9%8A%D9%87"},"cawiki":{"site":"cawiki","title":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner","badges":[],"url":"https://ca.wikipedia.org/wiki/B%C3%A9n%C3%A9dict_Pierre_Georges_Hochreutiner"},"commonswiki":{"site":"commonswiki","title":"Category:B\u00e9n\u00e9dict Pierre Georges Hochreutiner","badges":[],"url":"https://commons.wikimedia.org/wiki/Category:B%C3%A9n%C3%A9dict_Pierre_Georges_Hochreutiner"},"enwiki":{"site":"enwiki","title":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner","badges":[],"url":"https://en.wikipedia.org/wiki/B%C3%A9n%C3%A9dict_Pierre_Georges_Hochreutiner"},"eswiki":{"site":"eswiki","title":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner","badges":[],"url":"https://es.wikipedia.org/wiki/B%C3%A9n%C3%A9dict_Pierre_Georges_Hochreutiner"},"jawiki":{"site":"jawiki","title":"\u30d9\u30cd\u30c7\u30a3\u30af\u30c8\u30fb\u30d4\u30a8\u30fc\u30eb\u30fb\u30b8\u30e7\u30eb\u30b8\u30e5\u30fb\u30db\u30fc\u30db\u30ed\u30a4\u30c6\u30a3\u30ca\u30fc","badges":[],"url":"https://ja.wikipedia.org/wiki/%E3%83%99%E3%83%8D%E3%83%87%E3%82%A3%E3%82%AF%E3%83%88%E3%83%BB%E3%83%94%E3%82%A8%E3%83%BC%E3%83%AB%E3%83%BB%E3%82%B8%E3%83%A7%E3%83%AB%E3%82%B8%E3%83%A5%E3%83%BB%E3%83%9B%E3%83%BC%E3%83%9B%E3%83%AD%E3%82%A4%E3%83%86%E3%82%A3%E3%83%8A%E3%83%BC"},"ruwiki":{"site":"ruwiki","title":"\u0425\u043e\u0445\u0440\u043e\u0439\u0442\u0438\u043d\u0435\u0440, \u0411\u0435\u043d\u0435\u0434\u0438\u043a\u0442 \u041f\u044c\u0435\u0440 \u0416\u043e\u0440\u0436","badges":[],"url":"https://ru.wikipedia.org/wiki/%D0%A5%D0%BE%D1%85%D1%80%D0%BE%D0%B9%D1%82%D0%B8%D0%BD%D0%B5%D1%80,_%D0%91%D0%B5%D0%BD%D0%B5%D0%B4%D0%B8%D0%BA%D1%82_%D0%9F%D1%8C%D0%B5%D1%80_%D0%96%D0%BE%D1%80%D0%B6"},"specieswiki":{"site":"specieswiki","title":"B\u00e9n\u00e9dict Pierre Georges Hochreutiner","badges":[],"url":"https://species.wikimedia.org/wiki/B%C3%A9n%C3%A9dict_Pierre_Georges_Hochreutiner"}}}}}

			</textarea>
			<br />
			<button onclick="convert()">Convert</button>
		
	
	</div>
	<div style="clear:both;"></div>
	
	<div style="width:100%;">
		<h2>Triples</h2>
		<div id="output" style="width:100%;color:#222;"></div>
		<div id="jsonld" style="width:100%;white-space:pre;background-color:#333;color:white;"></div>
	</div>

</div>

		<script>
		


		
function wikidata(doc) {
  var triples = [];

           


  // fields
  for (var i in doc.message.entities) {
  	var cluster_id = 'https://www.wikidata.org/wiki/' + i;

	triples.push(triple(cluster_id,
              'http://purl.org/dc/terms/identifier',
              cluster_id));
              
    for (var j in doc.message.entities[i]) {
    switch (j) {
    
      case 'labels':
        for (var k in doc.message.entities[i][j]) {
            switch (k) {
              default:
                triples.push(triple(cluster_id,
                    'http://schema.org/alternateName',
                    doc.message.entities[i][j][k].value,
                    doc.message.entities[i][j][k].language
                    ));
                break;
            }
         }
         break;
    
        case 'sitelinks':
          for (var k in doc.message.entities[i][j]) {
            switch (k) {
              case 'enwiki':
                // dbpedia
                var dbpedia = doc.message.entities[i][j][k].url;
                
                dbpedia = dbpedia.replace(/http[s]?:\/\/en.wikipedia.org\/wiki\//, 'http://dbpedia.org/resource/');
                  triples.push(triple(cluster_id,
                    'http://purl.org/dc/terms/identifier',
                    dbpedia));
              
                // fall through
              
              default:
                  triples.push(triple(cluster_id,
                    'http://schema.org/sameAs',
                    doc.message.entities[i][j][k].url));
                break;
            }   
          }
          break;
    
        case 'claims':
          for (var k in doc.message.entities[i][j]) {
            console.log(k);
            
            // extract claims we are interested in
            switch (k) {
            
              // type (instance of)
              case 'P31':
                var type = '';
                var datatype = doc.message.entities[i][j][k][0].mainsnak.datatype;
                switch (datatype) {
                  case 'wikibase-item':
                      type = doc.message.entities[i][j][k][0].mainsnak.datavalue.value.id;
                    break;
                  default:
                    break;
                }
                if (type != '') {
                  switch (type) {
                    case 'Q5':
                      triples.push(triple(cluster_id,
                        'http://www.w3.org/1999/02/22-rdf-syntax-ns#type',
                        'http://schema.org/Person')); 
                      break;
                    default:
                      break;
                  }               
                }
                break;
                
              // Image
               case 'P18':
                  console.log(doc.message.entities[i][j][k][0].mainsnak.datavalue.value);
                  
                  var image = doc.message.entities[i][j][k][0].mainsnak.datavalue.value;
                  image = image.replace(/\s/, '_');
                  
                  triples.push(triple(cluster_id,
                    'http://schema.org/image',
                    'http://commons.wikimedia.org/wiki/Special:FilePath/' + image));                                    
              	break;
             
            
              // ISNI
              case 'P213':
                  console.log(doc.message.entities[i][j][k][0].mainsnak.datavalue.value);
                  
                  var isni = doc.message.entities[i][j][k][0].mainsnak.datavalue.value;
                  isni = isni.replace(/\s+/g, '');
                  
                  triples.push(triple(cluster_id,
                    'http://purl.org/dc/terms/identifier',
                    'http://isni.org/isni/' + isni));                                    
              	break;

              // VIAF
              case 'P214':
                  console.log(doc.message.entities[i][j][k][0].mainsnak.datavalue.value);
                  
                  var viaf = doc.message.entities[i][j][k][0].mainsnak.datavalue.value;

                  triples.push(triple(cluster_id,
                    'http://purl.org/dc/terms/identifier',
                    'https://viaf.org/viaf/' + viaf));                                    
              	break;

              // ORCID
              case 'P496':
                  console.log(doc.message.entities[i][j][k][0].mainsnak.datavalue.value);
                  
                  var orcid = doc.message.entities[i][j][k][0].mainsnak.datavalue.value;
                  orcid = orcid.replace(/\s+/g, '-');
                  
                  triples.push(triple(cluster_id,
                    'http://purl.org/dc/terms/identifier',
                    'http://orcid.org/' + orcid));                                    
              	break;

              // IPNI author
              case 'P586':
                  console.log(doc.message.entities[i][j][k][0].mainsnak.datavalue.value);
                  
                  var ipni = doc.message.entities[i][j][k][0].mainsnak.datavalue.value;
                  lsid = 'urn:lsid:ipni.org:authors:' + ipni;
                  
                  triples.push(triple(cluster_id,
                    'http://purl.org/dc/terms/identifier',
                    lsid)); 
                    
                  url = 'http://www.ipni.org/ipni/idAuthorSearch.do?id=' + ipni;
                  triples.push(triple(cluster_id,
                    'http://schema.org/sameAs',
                    url));                                    
              	break;
              	
              // FreeBase
              case 'P646':
                  console.log(doc.message.entities[i][j][k][0].mainsnak.datavalue.value);
                  
                  var freebase = doc.message.entities[i][j][k][0].mainsnak.datavalue.value;
                  
                  // Google Knowledge Graph
                  triples.push(triple(cluster_id,
                    'http://purl.org/dc/terms/identifier',
                    'https://g.co/kg' + freebase));                                    
              	break;
              	
              	
              	
              // official website (careful, can be project not person)
              case 'P856':
                  console.log(doc.message.entities[i][j][k][0].mainsnak.datavalue.value);
                  var url = doc.message.entities[i][j][k][0].mainsnak.datavalue.value;
                  
                  triples.push(triple(cluster_id,
                    'http://schema.org/sameAs',
                    url));                                    
              	break;

              // botanist author abbreviation
              case 'P428':
                  console.log(doc.message.entities[i][j][k][0].mainsnak.datavalue.value);
                  var property = doc.message.entities[i][j][k][0].mainsnak.datavalue.value;
                  triples.push(triple(cluster_id,
                    'http://schema.org/alternateName',
                    property));                                    
              	break;

              /* can't do this as given name is not a string in Wikidata 
              case 'P735':
                  console.log(doc.message.entities[i][j][k][0].mainsnak.datavalue.value);
                  var property = doc.message.entities[i][j][k][0].mainsnak.datavalue.value;
                  triples.push(triple(cluster_id,
                    'http://schema.org/givenName',
                    property));                                    
              	break;
              */
              default:
                break;
            
            }
            
          }
          break;
        default:
          break;
      }
    }
  }


  // defaults
  /*
  triples.push(triple(cluster_id,
    'http://www.w3.org/1999/02/22-rdf-syntax-ns#type',
    'http://rs.tdwg.org/dwc/terms/Taxon'));
  */
  
  output(doc, triples);

}
		
			function convert() {
				var jsonld = $('#json').val();
				var doc = {};
				doc.message = JSON.parse(jsonld);
				wikidata(doc);
				
			
			}
		</script>


</body>
</html>